# HAMRbox: A user-friendly adaptation of HAMR
![[HAMRbox_Workflow_v3](https://github.com/harrlol/hamrbox/assets/87460010/65f3e8c2-634f-433c-a3d8-777ac64c71f1](https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1&title=HAMRbox_Workflow_v1.png#R7Vxbd5u4Fv41WWvmISwQiMujnSZtTyfTTpKe9szLLBlkzAlGFHAu%2FfWzBcIGJMd2grHbtGvVQUKWQN%2B%2BfHtL8ol5Nn94m5F0dskCGp8gPXg4Md%2BcIIQtDJ%2B84rGqMHmJV4RZFFRVxqriOvpORaUuahdRQPNWw4KxuIjSdqXPkoT6RauOZBm7bzebsrg9akpCKlVc%2BySWa79EQTGral3krOrf0Sic1SMbtlfdmZO6sXiTfEYCdt%2BoMs9PzLOMsaK6mj%2Bc0ZjPXT0vX94%2Ffon%2FuLXf%2Fuev%2FBv5PP5w8%2Bd%2FT6vOLnb5yvIVMpoU%2FXZtVV3fkXgh5uv6HLr4BB%2F6FfVZmERFxJITZMcw8niS8XkoHsXk2t8W%2FOXHU5YUp3kJ%2FQgaGHoK0jNe3YerkP%2B9yaL5aUhillExpcuuUMYWSUD5s%2BrQclbMY7g04PL%2FtCgehVyRRcGgimXFjIUsIfEfjKWiHX8I0czgXdAkGHH5gfIkZv5tVXURxbEYIy8ydrsUCt7FEmF%2BOyYTGo%2BJfxuWj3bG4LHhVsISyrsKQMrE068e53xVO6YPUfGV96VhUfqfGIZfv3kQw5SFR1HYEmghEPwZGkIuYH9L2ZwW2SM0EDqsa0gX4i6UGAuRzmhMiuiurSpEaFy47GjZ9ycWwYOtmrDpNKdFW%2BzqNmLwpfqIoQ3XbQ%2BTs0XmU%2FGtHTpCVud5C5KFtJA6AiEgj41mKW%2BQK15qwzi7PpdoDxfVE9SlBkKrqlJXd9BbW9LbpYrWyvY%2BSRdFXQuDLG80lbmquRhd3%2FwF3YFygKlGF9dXo9P3b3JZR8FAkyQsxft%2BFhX0OiU%2Bv3cPrqOttS1V4qp5QeZRzKfoHY3vaBH5pKOz%2FFskjsIECj7IP83UOgpDRkkIJbwq3ZRW4BQgHa%2FsSNlh5ov%2BTZOPB9pfK%2FIJMgNM3cBaDtO446KJadurAcasKNi8NhxV3ZXwGqW9Yln0HV6G1O%2B%2Fmybf0aygD9vosmF31KlW5fuVczNqiZw1HJulr9fuhqzuLoqu7EJuRlfQFYAyIwU6AksPJdHe3b%2Fd3w35yvo91U7gVlm3pxpu6xX27gOeYeRSG%2F8dTlF2Rt7Pvn8cf0aX3z7WktUQnc2z3xYupfgoxKwhhEu33XDaKxeudtuAdPb4tVlofIsXV18rS%2FX3uubvUKJjbyk5zxWV2nY5HU%2Bpd2zSGg%2Fel9Os56NhqjgjnYO4gO9r%2B8Cj9nwNxyQ8nyV5vo6rm06nyPdVri6wJza2B3RZS1c0hMtSGhbDPKhl2SEg2Oja9m1C6pC9YULUU2oNY0O6bBsPbUNq8V%2FZkEuSpqUJuaIkyHcMlY01ofJ4dLneGLUUfYM56gpIGJM8P9kqAj5eE2Kig5sQmdceKTkBSFPeWxwlt70aDPW8KAzGk864P4PxMjxlvT6bUf82FeYHbttkznUrmeTpct4a8IMoFyrlmLjYwrrKxXf1y%2FVpqV8NwLmKAGGIR%2BK78ygI1pKQtni9DOjtddO0rY57x7Ju6grdNPemm4cNHI7TvT%2FptTe6d9S7tq5175phIRc74rMlWnbXnPfn7J%2BcHkWajQPzIgf%2FKWM%2BzfOSOLScfS%2F04TewLWBkeO%2Fw6vq3BRifguPjQwcZi%2BP6Tg6SXl%2FTwtd%2Bb2QMq3esk4YvIiE7M4mhrFeXWVjGlszC3pv1wpLQvR3dfBBwkTlfPZM5odL7iJzVk45HtOnf5%2By%2BnrEDap6lObhNCR0FcBhpeEjH40nQvRtdXm1NFUzDMrG1BVWwLcd2nb1RBV5uqyv82yOcyGxjabkylvaQDAIdNkHwQ6Uen%2BQL%2FWWthwkDkHVI4I0dgB82rFPhqW6IhyGKZieXbDu6Zhq6aVkucrBrm4MSRWT%2FKBHH0ciJN1hA0ZITxxk2hEDymkNFCfRPwM4jvyTf%2BiULoik4b77XJpfX52%2B%2B3uwnGXhEGT7cpgAYKbII5pA8HMk8vJURkhOAbYXeMSSqkz%2Fr80eDJXSw14bC9DTPlNEwlIxMq%2BOX%2FgFxJEA%2BUJpyazOj8LlIyp1qOpuW0xJl91HO6yPOoXPqVxvZdOJnLAc90icRTHLIKXNpZtKYK6BCw44vtNon%2Bshsp%2FOwq1BEz5ah7xrW3nCvtf4XJ1O70I2%2B1uydY6%2FhZJ1ciqvrmg6RquFVn4M6XvOHWaBZF8I5h47htpWv%2FpPDL7MXv8j4rgbCGYyMP5Hd94yBqbmcrTsD%2Bk2TfJFXnFxBxcfnb356Kt4x47Z96JR47cDWUXE5W7cbFd8AxWZqvjcqbhtaOy6yHUdTra86qkQ32hcVN00JkCuaUsLBmMLsgCkh%2FuykXK9IY%2Fmwx%2Bui1NhtQ6jL%2BuQOmd025WXNDnrdzQ4CzXKd8lVDaXcWKhRZCmdQKOUkhVoRxfbWVw0ebvs1pNBDb1DwvIMS1eeEKKcQ0eluO06xvU2BSln6RLMI5o2L0hDkt%2Ba0B8hEv0go6lNtv7Idz8TTQn3jud0KlNe1E3sOX6xNrPdFQayO7JYoeIb9pDB00ec3uxp%2FMIkYaG%2B61xYIQx9aIuTEx4sl4mi0eqgUhd4FEQ8LIpaz3T2qtXM0yamtkcfmQPZctzUMXAYjy3VshDpiYMHkmVg3TNewUL37fyiZwPuUCc%2Bx2qbesn5YU48HMhPLbaKHsvWmvBj6ESKhuD6LNGQm83g393Y2FTieIpM56KYCUz4tL2Arn6rgoXpIExiNj54krJD3hLxkWzj0TaudxJ9vrqqLxL%2F6c7TcAP67JAuvK0eAjI7IKA6rIlXye29ZgvoBfuVat8EPOxvhc9wh0UMSeq2lC3m%2F6c%2Byi6hzLMzVFcsW6i1E%2B4JCTnvPWfBPzJJQ8%2FM7CQjoMkrzdeK9HoSAUHeqBMH2XTqZDglCJ0WhOjarwmBvx2YtOV9dkMkCuFjp8MoOWJPHzEvu8qpNWndXDZYVyVUs%2Fu0PQ5l67noqzlvDT%2Fx4kQNq%2F6QZSyGm4cynUs1d2M%2BmzmesyFP43%2Bx502m37W3BSii8Z5mGvXHhri3AENBahzYHMh0WKJX0l8SPefTa1d%2BoEyC1%2Ftf8pYEaHtKPYpnS9HYqNqNhxNMYPcU7QQRCEk0Wzd%2Bw3KTqr0u6uucjXEWIPOjROyxvLeEsrYmklgbTflwC7xnoRxKQxKdVtz%2Bd4QfjoHWiIk%2F1o4GGqdVLSm3bv3QT%2FWMt%2F4ylpmmvXSM764quYvvdsBop8z0VSj9DuITaMau35Q6RZ%2FAjKK5%2BObpKCq9%2Bfts8%2Fxc%3D)https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1&title=HAMRbox_Workflow_v1.png#R7Vxbd5u4Fv41WWvmISwQiMujnSZtTyfTTpKe9szLLBlkzAlGFHAu%2FfWzBcIGJMd2grHbtGvVQUKWQN%2B%2BfHtL8ol5Nn94m5F0dskCGp8gPXg4Md%2BcIIQtDJ%2B84rGqMHmJV4RZFFRVxqriOvpORaUuahdRQPNWw4KxuIjSdqXPkoT6RauOZBm7bzebsrg9akpCKlVc%2BySWa79EQTGral3krOrf0Sic1SMbtlfdmZO6sXiTfEYCdt%2BoMs9PzLOMsaK6mj%2Bc0ZjPXT0vX94%2Ffon%2FuLXf%2Fuev%2FBv5PP5w8%2Bd%2FT6vOLnb5yvIVMpoU%2FXZtVV3fkXgh5uv6HLr4BB%2F6FfVZmERFxJITZMcw8niS8XkoHsXk2t8W%2FOXHU5YUp3kJ%2FQgaGHoK0jNe3YerkP%2B9yaL5aUhillExpcuuUMYWSUD5s%2BrQclbMY7g04PL%2FtCgehVyRRcGgimXFjIUsIfEfjKWiHX8I0czgXdAkGHH5gfIkZv5tVXURxbEYIy8ydrsUCt7FEmF%2BOyYTGo%2BJfxuWj3bG4LHhVsISyrsKQMrE068e53xVO6YPUfGV96VhUfqfGIZfv3kQw5SFR1HYEmghEPwZGkIuYH9L2ZwW2SM0EDqsa0gX4i6UGAuRzmhMiuiurSpEaFy47GjZ9ycWwYOtmrDpNKdFW%2BzqNmLwpfqIoQ3XbQ%2BTs0XmU%2FGtHTpCVud5C5KFtJA6AiEgj41mKW%2BQK15qwzi7PpdoDxfVE9SlBkKrqlJXd9BbW9LbpYrWyvY%2BSRdFXQuDLG80lbmquRhd3%2FwF3YFygKlGF9dXo9P3b3JZR8FAkyQsxft%2BFhX0OiU%2Bv3cPrqOttS1V4qp5QeZRzKfoHY3vaBH5pKOz%2FFskjsIECj7IP83UOgpDRkkIJbwq3ZRW4BQgHa%2FsSNlh5ov%2BTZOPB9pfK%2FIJMgNM3cBaDtO446KJadurAcasKNi8NhxV3ZXwGqW9Yln0HV6G1O%2B%2Fmybf0aygD9vosmF31KlW5fuVczNqiZw1HJulr9fuhqzuLoqu7EJuRlfQFYAyIwU6AksPJdHe3b%2Fd3w35yvo91U7gVlm3pxpu6xX27gOeYeRSG%2F8dTlF2Rt7Pvn8cf0aX3z7WktUQnc2z3xYupfgoxKwhhEu33XDaKxeudtuAdPb4tVlofIsXV18rS%2FX3uubvUKJjbyk5zxWV2nY5HU%2Bpd2zSGg%2Fel9Os56NhqjgjnYO4gO9r%2B8Cj9nwNxyQ8nyV5vo6rm06nyPdVri6wJza2B3RZS1c0hMtSGhbDPKhl2SEg2Oja9m1C6pC9YULUU2oNY0O6bBsPbUNq8V%2FZkEuSpqUJuaIkyHcMlY01ofJ4dLneGLUUfYM56gpIGJM8P9kqAj5eE2Kig5sQmdceKTkBSFPeWxwlt70aDPW8KAzGk864P4PxMjxlvT6bUf82FeYHbttkznUrmeTpct4a8IMoFyrlmLjYwrrKxXf1y%2FVpqV8NwLmKAGGIR%2BK78ygI1pKQtni9DOjtddO0rY57x7Ju6grdNPemm4cNHI7TvT%2FptTe6d9S7tq5175phIRc74rMlWnbXnPfn7J%2BcHkWajQPzIgf%2FKWM%2BzfOSOLScfS%2F04TewLWBkeO%2Fw6vq3BRifguPjQwcZi%2BP6Tg6SXl%2FTwtd%2Bb2QMq3esk4YvIiE7M4mhrFeXWVjGlszC3pv1wpLQvR3dfBBwkTlfPZM5odL7iJzVk45HtOnf5%2By%2BnrEDap6lObhNCR0FcBhpeEjH40nQvRtdXm1NFUzDMrG1BVWwLcd2nb1RBV5uqyv82yOcyGxjabkylvaQDAIdNkHwQ6Uen%2BQL%2FWWthwkDkHVI4I0dgB82rFPhqW6IhyGKZieXbDu6Zhq6aVkucrBrm4MSRWT%2FKBHH0ciJN1hA0ZITxxk2hEDymkNFCfRPwM4jvyTf%2BiULoik4b77XJpfX52%2B%2B3uwnGXhEGT7cpgAYKbII5pA8HMk8vJURkhOAbYXeMSSqkz%2Fr80eDJXSw14bC9DTPlNEwlIxMq%2BOX%2FgFxJEA%2BUJpyazOj8LlIyp1qOpuW0xJl91HO6yPOoXPqVxvZdOJnLAc90icRTHLIKXNpZtKYK6BCw44vtNon%2Bshsp%2FOwq1BEz5ah7xrW3nCvtf4XJ1O70I2%2B1uydY6%2FhZJ1ciqvrmg6RquFVn4M6XvOHWaBZF8I5h47htpWv%2FpPDL7MXv8j4rgbCGYyMP5Hd94yBqbmcrTsD%2Bk2TfJFXnFxBxcfnb356Kt4x47Z96JR47cDWUXE5W7cbFd8AxWZqvjcqbhtaOy6yHUdTra86qkQ32hcVN00JkCuaUsLBmMLsgCkh%2FuykXK9IY%2Fmwx%2Bui1NhtQ6jL%2BuQOmd025WXNDnrdzQ4CzXKd8lVDaXcWKhRZCmdQKOUkhVoRxfbWVw0ebvs1pNBDb1DwvIMS1eeEKKcQ0eluO06xvU2BSln6RLMI5o2L0hDkt%2Ba0B8hEv0go6lNtv7Idz8TTQn3jud0KlNe1E3sOX6xNrPdFQayO7JYoeIb9pDB00ec3uxp%2FMIkYaG%2B61xYIQx9aIuTEx4sl4mi0eqgUhd4FEQ8LIpaz3T2qtXM0yamtkcfmQPZctzUMXAYjy3VshDpiYMHkmVg3TNewUL37fyiZwPuUCc%2Bx2qbesn5YU48HMhPLbaKHsvWmvBj6ESKhuD6LNGQm83g393Y2FTieIpM56KYCUz4tL2Arn6rgoXpIExiNj54krJD3hLxkWzj0TaudxJ9vrqqLxL%2F6c7TcAP67JAuvK0eAjI7IKA6rIlXye29ZgvoBfuVat8EPOxvhc9wh0UMSeq2lC3m%2F6c%2Byi6hzLMzVFcsW6i1E%2B4JCTnvPWfBPzJJQ8%2FM7CQjoMkrzdeK9HoSAUHeqBMH2XTqZDglCJ0WhOjarwmBvx2YtOV9dkMkCuFjp8MoOWJPHzEvu8qpNWndXDZYVyVUs%2Fu0PQ5l67noqzlvDT%2Fx4kQNq%2F6QZSyGm4cynUs1d2M%2BmzmesyFP43%2Bx502m37W3BSii8Z5mGvXHhri3AENBahzYHMh0WKJX0l8SPefTa1d%2BoEyC1%2Ftf8pYEaHtKPYpnS9HYqNqNhxNMYPcU7QQRCEk0Wzd%2Bw3KTqr0u6uucjXEWIPOjROyxvLeEsrYmklgbTflwC7xnoRxKQxKdVtz%2Bd4QfjoHWiIk%2F1o4GGqdVLSm3bv3QT%2FWMt%2F4ylpmmvXSM764quYvvdsBop8z0VSj9DuITaMau35Q6RZ%2FAjKK5%2BObpKCq9%2Bfts8%2Fxc%3D)
## Overview
- HAMRbox is a bundle of selected tools that capture different parts of the pipeline tailored for the [High Throughput Annotation of Modified Ribonucleotides](https://github.com/GregoryLab/HAMR), abbreviated HAMR, developed by [Paul Ryvkin et al](https://rnajournal.cshlp.org/content/19/12/1684). HAMRbox aims to make the original method more accessible by automating the tedious pre-processing steps, allowing users to analyze RNA-seq data at an experiment scale. 
- HAMRbox is high-throughput and performs RNA-modification analysis at a bioproject scale. HAMRbox performs constitutive trimming of acquired reads using Trim-Galore, and makes use of STAR as the aligning tool which reduces runtime with a rivaling robustness compared to TopHat2 as suggested in the original pipeline.


## Command Line Arguments and Description

| Command | Description |
| --- | --- |
| Required |
| -o | \<project directory\> |
| -t | \<SRA accession list.txt or folder of raw fastq files\> |
| -c | \<filenames for each fastq.csv\>|
| -g | \<reference genome.fa> |
| -i | \<reference genome annotation.gff3> |
| -l | \<read length\> |
| -s | \<genome size in bp \> |
| Optional |
| -a | \[use TopHat2 instead of STAR\]|
| -b | \[Tophat library choice: fr-unstranded, fr-firststrand, fr-secondstrand\]|
| -f | \[filter\]|
| -e | \[genome annotation generator\]|
| -Q | \[HAMR: minimum qualuty score, default=30\]|
| -C | \[HAMR: minimum coveragem default=50\]|
| -E | \[HAMR: sequencing error, default=0.01\]|
| -P | \[HAMR: maximum p-value, default=1\]|
| -F | \[HAMR: maximum fdr, default=0.05\]|
| -m | \[HAMR model\]|
| -n | \[number of threads, default=4\]|
| -h | \[help message\]|


## Running HAMRbox (demo)

Pull docker image from this git
```
docker pull harrlol/hamrbox
```

Download genome fastq file for Arabidopsis thaliana
```
wget -qO- https://ftp.ensemblgenomes.ebi.ac.uk/pub/plants/release-57/fasta/arabidopsis_thaliana/dna/Arabidopsis_thaliana.TAIR10.dna.toplevel.fa.gz | tar xvz 
```

Download annotation gff3 file for Arabidopsis thaliana
```
wget -qO- https://ftp.ensemblgenomes.ebi.ac.uk/pub/plants/release-57/gff3/arabidopsis_thaliana/Arabidopsis_thaliana.TAIR10.57.gff3.gz | tar xvz 
```

Run HAMRbox
```
docker run --rm -v $(pwd):/working-dir -o /working-dir harrlol/hamrbox -t ~/demo/PRJNA596803_list.txt -c ~/demo/PRJNA596803_filenames.csv -g ~/path/to/genomefiles -l 50 -s 135000000
```
